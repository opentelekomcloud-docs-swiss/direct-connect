:original_name: ListVirtualGateways.html

.. _ListVirtualGateways:

Querying the Virtual Gateway List
=================================

Function
--------

This API is used to query the virtual gateway list.

URI
---

GET /v3/{project_id}/dcaas/virtual-gateways

.. table:: **Table 1** Path parameters

   ========== ========= ====== =========================
   Parameter  Mandatory Type   Description
   ========== ========= ====== =========================
   project_id Yes       String Specifies the project ID.
   ========== ========= ====== =========================

.. table:: **Table 2** Query parameters

   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Mandatory       | Type            | Description                                                                                                                                                                         |
   +=======================+=================+=================+=====================================================================================================================================================================================+
   | limit                 | No              | Integer         | Specifies the number of records returned on each page. Value range: **1-2000**                                                                                                      |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Minimum: **1**                                                                                                                                                                      |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Maximum: **2000**                                                                                                                                                                   |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Default: **2000**                                                                                                                                                                   |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | marker                | No              | String          | Specifies the ID of the last resource record on the previous page. If this parameter is left blank, the first page is queried. This parameter must be used together with **limit**. |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Minimum: **0**                                                                                                                                                                      |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Maximum: **36**                                                                                                                                                                     |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | fields                | No              | Array           | Specifies the list of fields to be displayed.                                                                                                                                       |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Array length: **1-5**                                                                                                                                                               |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_dir              | No              | Array           | Specifies the sorting order of returned results. The value can be **asc** (default) or **desc**.                                                                                    |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_key              | No              | String          | Specifies the field for sorting.                                                                                                                                                    |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Default: **id**                                                                                                                                                                     |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Minimum: **0**                                                                                                                                                                      |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Maximum: **36**                                                                                                                                                                     |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                    | No              | Array           | Specifies the resource ID by which instances are queried.                                                                                                                           |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Array length: **1-5**                                                                                                                                                               |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_project_id | No              | Array           | Filters resource instances by enterprise project ID.                                                                                                                                |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Array length: **1-10**                                                                                                                                                              |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vpc_id                | No              | Array           | Specifies the VPC ID by which virtual gateways are queried.                                                                                                                         |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 3** Request header parameters

   +-----------------+-----------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                                        |
   +=================+=================+=================+====================================================================================================================================================================================================================+
   | X-Auth-Token    | Yes             | String          | Specifies the user token. To obtain the token, see section "Obtaining the User Token" in the *Identity and Access Management API Reference*. The token is the value of **X-Subject-Token** in the response header. |
   |                 |                 |                 |                                                                                                                                                                                                                    |
   |                 |                 |                 | Minimum: **0**                                                                                                                                                                                                     |
   |                 |                 |                 |                                                                                                                                                                                                                    |
   |                 |                 |                 | Maximum: **10240**                                                                                                                                                                                                 |
   +-----------------+-----------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 4** Response body parameters

   +------------------+--------------------------------------------------------------------------------------------------------------------+---------------------------------------------+
   | Parameter        | Type                                                                                                               | Description                                 |
   +==================+====================================================================================================================+=============================================+
   | request_id       | String                                                                                                             | Specifies the request ID.                   |
   +------------------+--------------------------------------------------------------------------------------------------------------------+---------------------------------------------+
   | virtual_gateways | Array of :ref:`VirtualGateway <listvirtualgateways__en-us_topic_0000001782745617_response_virtualgateway>` objects | Specifies the virtual gateway list.         |
   +------------------+--------------------------------------------------------------------------------------------------------------------+---------------------------------------------+
   | page_info        | :ref:`PageInfo <listvirtualgateways__en-us_topic_0000001782745617_response_pageinfo>` object                       | Specifies the pagination query information. |
   +------------------+--------------------------------------------------------------------------------------------------------------------+---------------------------------------------+

.. _listvirtualgateways__en-us_topic_0000001782745617_response_virtualgateway:

.. table:: **Table 5** VirtualGateway

   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                 |
   +=======================+=======================+=============================================================================================================================================================+
   | id                    | String                | Specifies the virtual gateway ID.                                                                                                                           |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vpc_id                | String                | Specifies the ID of the VPC connected using the virtual gateway.                                                                                            |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_router_id  | String                | Specifies the ID of the enterprise router that the virtual gateway is attached to.                                                                          |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tenant_id             | String                | Specifies the project ID.                                                                                                                                   |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Minimum: **32**                                                                                                                                             |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Maximum: **32**                                                                                                                                             |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                  | String                | Specifies the virtual gateway name.                                                                                                                         |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Minimum: **0**                                                                                                                                              |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Maximum: **64**                                                                                                                                             |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description           | String                | Provides supplementary information about the virtual gateway.                                                                                               |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Minimum: **0**                                                                                                                                              |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Maximum: **128**                                                                                                                                            |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | type                  | String                | Specifies the virtual gateway type. The value can only be **default**.                                                                                      |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Default: **default**                                                                                                                                        |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | local_ep_group        | Array of strings      | Specifies the IPv4 subnets of the associated VPC that can be accessed over the virtual gateway.                                                             |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | local_ep_group_ipv6   | Array of strings      | Specifies the IPv6 subnets of the associated VPC that can be accessed over the virtual gateway. This is a reserved field.                                   |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | admin_state_up        | Boolean               | Specifies the administrative status. The value can be **true** or **false**.                                                                                |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Default: **true**                                                                                                                                           |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                | String                | Specifies the operating status. The value can be **ACTIVE**, **DOWN**, **BUILD**, **ERROR**, **PENDING_CREATE**, **PENDING_UPDATE**, or **PENDING_DELETE**. |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bgp_asn               | Integer               | Specifies the local BGP ASN of the virtual gateway.                                                                                                         |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Minimum: **1**                                                                                                                                              |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Maximum: **4294967295**                                                                                                                                     |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_project_id | String                | Specifies the ID of the enterprise project that the virtual gateway belongs to.                                                                             |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Minimum: **36**                                                                                                                                             |
   |                       |                       |                                                                                                                                                             |
   |                       |                       | Maximum: **36**                                                                                                                                             |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | device_id             | String                | Specifies the ID of the device that the virtual interface belongs to.                                                                                       |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | redundant_device_id   | String                | Specifies the ID of the redundant device.                                                                                                                   |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | public_border_group   | String                | Specifies the public border group of the AZ, indicating whether the site is a HomeZones site. (This parameter is not supported currently.)                  |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _listvirtualgateways__en-us_topic_0000001782745617_response_pageinfo:

.. table:: **Table 6** PageInfo

   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                               |
   +=======================+=======================+===========================================================================================================================================+
   | previous_marker       | String                | Specifies the marker of the previous page. The value is the resource UUID.                                                                |
   |                       |                       |                                                                                                                                           |
   |                       |                       | Minimum: **0**                                                                                                                            |
   |                       |                       |                                                                                                                                           |
   |                       |                       | Maximum: **36**                                                                                                                           |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
   | current_count         | Integer               | Specifies the number of resources in the current list.                                                                                    |
   |                       |                       |                                                                                                                                           |
   |                       |                       | Minimum: **0**                                                                                                                            |
   |                       |                       |                                                                                                                                           |
   |                       |                       | Maximum: **2000**                                                                                                                         |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
   | next_marker           | String                | Specifies the marker of the next page. The value is the resource UUID. If this parameter is left empty, the resource is on the last page. |
   |                       |                       |                                                                                                                                           |
   |                       |                       | Minimum: **0**                                                                                                                            |
   |                       |                       |                                                                                                                                           |
   |                       |                       | Maximum: **36**                                                                                                                           |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+

Example Requests
----------------

Querying the virtual gateway list

.. code-block:: text

   GET https://{dc_endpoint}/v3/0605768a3300d5762f82c01180692873/dcaas/virtual-gateways?id=40e32deb-c185-47ef-a3d0-02ed1472e805

Example Responses
-----------------

**Status code: 200**

OK

-  The list of virtual gateways associated with VPCs is queried.

   .. code-block::

      {
          "request_id": "dad53817cd781f6c31289773f07a276a",
          "virtual_gateways": [
             {
                  "enterprise_project_id": "0",
                  "name": "vgw-0620",
                  "id": "40e32deb-c185-47ef-a3d0-02ed1472e805",
                  "description": "",
                  "tenant_id": "4bd6efdb0fb747b39aa2c0162c112226",
                  "vpc_id": "6ae914c2-f4cf-4107-934a-2423d01b8609",
                  "enterprise_router_id": null,
                  "tags": [],
                  "device_id": "26.151.63.100",
                  "redundant_device_id": "26.152.128.20",
                  "type": "default",
                  "status": "ACTIVE",
                  "admin_state_up": true,
                  "bgp_asn": 64512,
                  "local_ep_group": [
                      "192.168.0.0/24"
                  ],
                  "local_ep_group_ipv6": [
                      "1250:5:300c::/64"
                  ],
                  "public_border_group": "center"
              }
          ],
          "page_info": {
              "previous_marker": "0052b0f3-5b34-4b17-a2a1-287a4396561a",
              "current_count": 45
          }
      }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
